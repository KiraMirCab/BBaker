"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[668],{5857:function(e,r,t){var o=t(2235),i=t.n(o);const s="/api/delivery";class n{getDeliveries(){return i().get(s)}getReadytDeliveries(){return i().get(s+"/ready")}getDeliveryInfo(e){return i().get(s+"/"+e)}createNewDelivery(e){return i().post(s+"/add",e)}findDeliveryByOrderId(e){return i().get(s+"/order/"+e)}geocodeAddress(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyAwJd9L1aFxZb6gyInuN39ByiGvx6qkiWM`;return i().get(r)}}r["Z"]=new n},5690:function(e,r,t){t.r(r),t.d(r,{default:function(){return G}});var o=t(3396),i=t(7139);const s={class:"wrapper"},n={key:0,class:"row"},d={class:"col-md center more space"},a={class:"col-md center"},l={class:"row"},c={class:"col center"};function u(e,r,t,u,p,h){const m=(0,o.up)("ExistingOrderVue"),y=(0,o.up)("DeliveryForm");return(0,o.wg)(),(0,o.iD)("main",s,[(0,o._)("h1",null,(0,i.zw)(e.$t("newOrder.header"))+(0,i.zw)(p.id),1),(0,o.Wm)(m,{order:p.order,past:!1},null,8,["order"]),p.showDeliveryForm?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",d,[(0,o._)("button",{onClick:r[0]||(r[0]=e=>h.confirmOrder()),class:"btn btn-success more-space"},(0,i.zw)(e.$t("BBorder.confirm")),1)]),(0,o._)("div",a,[(0,o._)("button",{onClick:r[1]||(r[1]=e=>h.deleteOrder()),class:"btn btn-dark more-space"},(0,i.zw)(e.$t("BBorder.cancel")),1)])])),p.showDeliveryForm?((0,o.wg)(),(0,o.j4)(y,{key:1,id:p.id,specialTransport:p.specialTransport,toggle:h.togglePayButton},null,8,["id","specialTransport","toggle"])):(0,o.kq)("",!0),(0,o._)("div",l,[(0,o._)("div",c,[p.deliverySaved?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:r[2]||(r[2]=e=>h.pay()),class:"btn btn-success"},(0,i.zw)(e.$t("BBorder.pay")),1)):(0,o.kq)("",!0)])])])}var p=t(9242);const h={key:0,class:"container"},m={class:"form-group"},y={for:"addr"},v=["placeholder"],w={key:0,class:"error"},f={class:"form-group"},g={for:"rName"},k={key:0,class:"error"},D={class:"form-group"},b={for:"rPhone"},_={key:0,class:"error"},P={class:"form-group"},N={for:"note"},$=["placeholder"],B={class:"form-group date","data-provide":"datepicker"},z={for:"date"},C={class:"input-group"},x={class:"checkbox"},T=(0,o._)("i",{class:"icofont-gift icofont-2x"},null,-1),V={class:"form-check-label"},O=(0,o._)("br",null,null,-1);function q(e,r,t,s,n,d){const a=(0,o.up)("datepicker");return n.saveVisible?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("form",{onSubmit:r[7]||(r[7]=(0,p.iM)(((...e)=>d.checkform&&d.checkform(...e)),["prevent"]))},[(0,o._)("div",m,[(0,o._)("label",y,(0,i.zw)(e.$t("delivery.addr"))+": *",1),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>n.address=e),type:"text",id:"addr",class:"form-control custom-input",placeholder:e.$t("delivery.addrPlaceholder")},null,8,v),[[p.nr,n.address,void 0,{trim:!0}]]),n.errorAddress?((0,o.wg)(),(0,o.iD)("p",w,(0,i.zw)(e.$t("delivery.addrError")),1)):(0,o.kq)("",!0)]),(0,o._)("div",f,[(0,o._)("label",g,(0,i.zw)(e.$t("delivery.recipientName"))+": *",1),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>n.recipientName=e),type:"text",id:"rName",class:"form-control"},null,512),[[p.nr,n.recipientName,void 0,{trim:!0}]]),n.errorName?((0,o.wg)(),(0,o.iD)("p",k,(0,i.zw)(e.$t("delivery.nameError")),1)):(0,o.kq)("",!0)]),(0,o._)("div",D,[(0,o._)("label",b,(0,i.zw)(e.$t("delivery.recipientPhone"))+": *",1),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>n.recipientPhone=e),type:"tel",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{3}",id:"rPhone",class:"form-control"},null,512),[[p.nr,n.recipientPhone,void 0,{trim:!0}]]),(0,o._)("small",null,(0,i.zw)(e.$t("delivery.phoneFormat")),1),n.errorPhone?((0,o.wg)(),(0,o.iD)("p",_,(0,i.zw)(e.$t("delivery.phoneError")),1)):(0,o.kq)("",!0)]),(0,o._)("div",P,[(0,o._)("label",N,(0,i.zw)(e.$t("delivery.note")),1),(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":r[3]||(r[3]=e=>n.note=e),id:"note",class:"form-control custom-input",rows:"10",placeholder:e.$t("delivery.notePlaceholder")},null,8,$),[[p.nr,n.note]])]),(0,o._)("div",B,[(0,o._)("label",z,(0,i.zw)(e.$t("delivery.date"))+":",1),(0,o._)("div",C,[(0,o.Wm)(a,{modelValue:n.deliveryDate,"onUpdate:modelValue":r[4]||(r[4]=e=>n.deliveryDate=e),"lower-limit":n.availableFrom},null,8,["modelValue","lower-limit"])])]),(0,o._)("div",x,[T,(0,o._)("label",V,[(0,o.Uk)((0,i.zw)(e.$t("delivery.surprise"))+" ",1),(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":r[5]||(r[5]=e=>n.surprise=e),class:"form-check-input"},null,512),[[p.e8,n.surprise]])]),O]),n.saveVisible?((0,o.wg)(),(0,o.iD)("button",{key:0,type:"submit",onClick:r[6]||(r[6]=(...e)=>d.checkform&&d.checkform(...e)),class:"submit"},(0,i.zw)(e.$t("delivery.save")),1)):(0,o.kq)("",!0)],32)])):(0,o.kq)("",!0)}var F=t(5857),Z=t(2239),A=t(4870),I=t(2492),S=t.n(I),U={components:{Datepicker:Z.Z},props:["id","specialTransport","delivery","toggle"],created(e){this.delivery&&(this.deliveryDate=e.deliveryDate,this.address=e.address,this.note=e.note,this.recipientName=e.recipientName,this.surprise=e.surprise,this.recipientPhone=e.recipientPhone,this.order_id=e.order_id)},data(){return{deliveryDate:(0,A.iH)((new Date).setDate((new Date).getDate()+1)),address:"",note:"",recipientName:"",surprise:!1,recipientPhone:"",errorAddress:!1,errorName:!1,errorPhone:!1,availableFrom:(0,A.iH)(new Date),saveVisible:!0}},methods:{checkform(){this.address&&this.recipientName&&this.recipientPhone?(this.errorAddress=!1,this.errorName=!1,this.errorPhone=!1,S().fire({title:"Are you sure?",text:"The delivery detales can't be changed after you hit the 'Save' button",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Save!"}).then((e=>{if(e.isConfirmed){const e={date:this.deliveryDate,address:this.address,recipientName:this.recipientName,recipientPhone:this.recipientPhone,note:this.note,surprise:this.surprise,specialTransport:this.specialTransport,order_id:this.id};F.Z.createNewDelivery(e).catch((e=>{console.log(e.response.data)})),S().fire("Delivery detailes saved!","You will soon get your yum-yums, you only need to pay","success"),this.saveVisible=!1,this.toggle()}}))):(""===this.address&&(this.errorAddress=!0),""===this.recipientName&&(this.errorName=!0),""===this.recipientPhone&&(this.errorPhone=!0))}}},E=t(89);const Y=(0,E.Z)(U,[["render",q]]);var W=Y,j=t(4911),H=t(9233),M={name:"NewOrder",props:[],components:{ExistingOrderVue:H.Z,DeliveryForm:W},created(){this.id=this.$route.path.split("/")[2],console.log(this.id),this.getOrderInfo(this.id),console.log(this.orderProducts)},data(){return{id:"",orderProducts:[],order:{},specialTransport:!1,showDeliveryForm:!1,deliverySaved:!1}},methods:{getOrderInfo(e){j.Z.getOrderInfo(e).then((e=>{this.order=e.data,this.orderProducts=this.order.orderProducts,this.orderProducts.forEach((e=>{e.product.specialTransport&&(this.specialTransport=!0)}))}))},confirmOrder(){S().fire("Now let's check your address"),this.showDeliveryForm=!0},deleteOrder(){S().fire({title:"Are you sure?",text:"Your order will be cancelled and you won't get these yum-yums!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((e=>{if(e.isConfirmed){const e={order_id:this.id};j.Z.deleteOrder(e).catch((e=>{console.log(e.response.data)})),S().fire("Deleted!","Your order was cancelled","success"),this.$router.go(-1)}}))},togglePayButton(){this.deliverySaved=!this.deliverySaved},pay(){const e={order_id:this.id,paidDate:Date.now()};console.log(e),j.Z.setPaid(e),S().fire({icon:"success",title:"Thank you!",text:"The payment was successfull",showConfirmButton:!1,timer:3e3}),this.$router.go(-1)}}};const R=(0,E.Z)(M,[["render",u]]);var G=R}}]);
//# sourceMappingURL=new-order.ff40341c.js.map