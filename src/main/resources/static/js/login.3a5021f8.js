"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[535],{913:function(r,e,s){var t=s(2235),o=s.n(t);const a="/api/registration",i="/api/login",l={headers:{Authorization:`Bearer ${localStorage.token}`}};class n{registerNewUser(r){return o().post(a,r)}loginUser(r){return o().post(i,r)}getUser(r){return o().post(i+"/getuser",r)}getUsers(){return o().post(i,l)}changeUserRole(r){return o().post(i+"/role",r)}}e["Z"]=new n},676:function(r,e,s){s.r(e),s.d(e,{default:function(){return y}});var t=s(3396),o=s(7139),a=s(9242);const i={class:"wrapper"},l={class:"center"},n={class:"container"},c={class:"card-container"},u={class:"form-group"},p=(0,t._)("label",{for:"email"},"Email:",-1),m={key:0,id:"emailHelp",class:"error"},d={class:"form-group"},h={for:"pass"},g={key:0,id:"passHelp",class:"error"},f={class:"user-cell"},w={key:0,class:"error"},k={type:"submit",class:"user-submit"};function _(r,e,s,_,v,U){const b=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("main",i,[(0,t._)("h1",l,(0,o.zw)(r.$t("user.signIn")),1),(0,t._)("div",n,[(0,t._)("div",c,[(0,t._)("form",{onSubmit:e[2]||(e[2]=(0,a.iM)(((...r)=>U.checkform&&U.checkform(...r)),["prevent"]))},[(0,t._)("div",u,[p,(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>v.email=r),type:"email",id:"email",class:"form-control"},null,512),[[a.nr,v.email,void 0,{trim:!0}]]),v.errorEmail?((0,t.wg)(),(0,t.iD)("p",m,(0,o.zw)(r.$t("user.error.email")),1)):(0,t.kq)("",!0)]),(0,t._)("div",d,[(0,t._)("label",h,(0,o.zw)(r.$t("user.pass"))+":",1),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>v.pass=r),type:"text",id:"pass",class:"form-control"},null,512),[[a.nr,v.pass,void 0,{trim:!0}]]),v.errorPass?((0,t.wg)(),(0,t.iD)("p",g,(0,o.zw)(r.$t("user.error.passReq")),1)):(0,t.kq)("",!0)]),(0,t._)("div",f,[(0,t._)("p",null,(0,o.zw)(r.$t("user.noAcc")),1),(0,t.Wm)(b,{to:"/register",class:"user-link"},{default:(0,t.w5)((()=>[(0,t._)("span",null,(0,o.zw)(r.$t("user.buttonSU")),1)])),_:1})]),v.errorCred?((0,t.wg)(),(0,t.iD)("p",w,(0,o.zw)(r.$t("user.error.wrong")),1)):(0,t.kq)("",!0),(0,t._)("button",k,(0,o.zw)(r.$t("user.buttonSI")),1)],32)])])])}var v=s(913),U={data(){return{email:"",pass:"",errorEmail:!1,errorPass:!1,errorCred:!1}},methods:{checkform(){if(this.email&&this.pass){this.errorEmail=!1,this.errorPass=!1;const r={email:this.email,password:this.pass};console.log("this is checkform method in loginView"),v.Z.loginUser(r).then((e=>{console.log(e.data),localStorage.setItem("token",e.data),v.Z.getUser(r).then((r=>{console.log(r.data),localStorage.setItem("user",JSON.stringify(r.data)),this.emitter.emit("loggedUser",r.data),this.$router.push("/profile")})).catch((r=>{this.errorCred=!0,console.log(r)}))})).catch((r=>{this.errorCred=!0,console.log(r)}))}else this.email||(this.errorEmail=!0),""===this.pass&&(this.errorPass=!0)}}},b=s(89);const $=(0,b.Z)(U,[["render",_]]);var y=$}}]);
//# sourceMappingURL=login.3a5021f8.js.map