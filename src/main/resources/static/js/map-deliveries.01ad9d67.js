"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[15],{5857:function(e,t,r){var i=r(2235),o=r.n(i);const s="/api/delivery";class n{getDeliveries(){return o().get(s)}getReadytDeliveries(){return o().get(s+"/ready")}getDeliveryInfo(e){return o().get(s+"/"+e)}createNewDelivery(e){return o().post(s+"/add",e)}findDeliveryByOrderId(e){return o().get(s+"/order/"+e)}geocodeAddress(e){const t=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyAwJd9L1aFxZb6gyInuN39ByiGvx6qkiWM`;return o().get(t)}}t["Z"]=new n},3523:function(e,t,r){r.r(t),r.d(t,{default:function(){return ke}});var i=r(3396);function o(e,t,r,o,s,n){const a=(0,i.up)("Marker"),l=(0,i.up)("GoogleMap");return(0,i.wg)(),(0,i.j4)(l,{"api-key":e.api,style:{width:"100%",height:"93vh"},center:e.center,zoom:14},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.markers,((t,r)=>((0,i.wg)(),(0,i.j4)(a,{key:r,options:{position:t},onClick:r=>e.center=t},null,8,["options","onClick"])))),128))])),_:1},8,["api-key","center"])}var s=r(5857),n=(r(6699),r(2801),r(4870)),a=r(9242);let l=Symbol("map"),u=Symbol("api"),d=Symbol("marker"),p=Symbol("markerCluster"),c=Symbol("CustomMarker"),h=Symbol("mapTilesLoaded"),m="click dblclick drag dragend dragstart mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");var g=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i;if(Array.isArray(t)){var o=t.length;if(o!=r.length)return!1;for(i=o;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();var s=Object.keys(t);if(o=s.length,o!==Object.keys(r).length)return!1;for(i=o;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=o;0!==i--;)if(o=s[i],!e(t[o],r[o]))return!1;return!0}return t!==t&&r!==r};class v{constructor({apiKey:e,channel:t,client:r,id:i="__googleMapsScriptId",libraries:o=[],language:s,region:n,version:a,mapIds:l,nonce:u,retries:d=3,url:p="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.loading=this.done=!1,this.errors=[],this.version=a,this.apiKey=e,this.channel=t,this.client=r,this.id=i||"__googleMapsScriptId",this.libraries=o,this.language=s,this.region=n,this.mapIds=l,this.nonce=u,this.retries=d,this.url=p,v.instance){if(!g(this.options,v.instance.options))throw Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(v.instance.options)}`);return v.instance}v.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),0<this.libraries.length&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),e}deleteScript(){let e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((r=>{r?t(r.error):e(window.google)}))}))}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))this.callback();else{var e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}}reset(){this.deleteScript(),this.loading=this.done=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){this.errors.push(e),this.errors.length<=this.retries?(e=this.errors.length*Math.pow(2,this.errors.length),console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)):(this.onerrorEvent=e,this.callback())}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){this.resetIfRetryingFailed(),this.done?this.callback():window.google&&window.google.maps&&window.google.maps.version?(console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback()):this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}function f(e){return class extends e.OverlayView{constructor(e){super();let{element:t,...r}=e;this.element=t,this.opts=r,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof e.LatLng?this.opts.position:new e.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;let e=this.element;return"none"!==e.style.display&&"hidden"!==e.style.visibility&&(""===e.style.opacity||.01<Number(e.style.opacity))}onAdd(){if(this.element){var e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.element)}}draw(){if(this.element){var e=this.getProjection().fromLatLngToDivPixel(this.getPosition());if(e){this.element.style.position="absolute";let r=this.element.offsetHeight;var t=this.element.offsetWidth;switch(this.opts.anchorPoint){case"TOP_CENTER":t=e.x-t/2,e=e.y;break;case"BOTTOM_CENTER":t=e.x-t/2,e=e.y-r;break;case"LEFT_CENTER":t=e.x,e=e.y-r/2;break;case"RIGHT_CENTER":t=e.x-t,e=e.y-r/2;break;case"TOP_LEFT":t=e.x,e=e.y;break;case"TOP_RIGHT":t=e.x-t,e=e.y;break;case"BOTTOM_LEFT":t=e.x,e=e.y-r;break;case"BOTTOM_RIGHT":t=e.x-t,e=e.y-r;break;default:t=e.x-t/2,e=e.y-r/2}this.element.style.left=t+"px",this.element.style.top=e+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}}onRemove(){this.element&&this.element.remove()}setOptions(e){this.opts=e,this.draw()}}}let y,k="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed".split(" ");var b=(0,i.aZ)({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1}},emits:k,setup(e,{emit:t}){let r=(0,n.iH)(),o=(0,n.iH)(!1),s=(0,n.iH)(),a=(0,n.iH)(),d=(0,n.iH)(!1);(0,i.JJ)(l,s),(0,i.JJ)(u,a),(0,i.JJ)(h,d);let p=()=>{const t={...e};Object.keys(t).forEach((e=>{void 0===t[e]&&delete t[e]}));var r=e=>{var t;return e?{position:null===(t=a.value)||void 0===t?void 0:t.ControlPosition[e]}:{}};return r={scaleControlOptions:e.scaleControlStyle?{style:e.scaleControlStyle}:{},panControlOptions:r(e.panControlPosition),zoomControlOptions:r(e.zoomControlPosition),rotateControlOptions:r(e.rotateControlPosition),streetViewControlOptions:r(e.streetViewControlPosition),fullscreenControlOptions:r(e.fullscreenControlPosition),disableDefaultUI:e.disableDefaultUi},{...t,...r}},m=(0,i.YP)([a,s],(([e,t])=>{e&&t&&(e.event.addListenerOnce(t,"tilesloaded",(()=>{d.value=!0})),setTimeout(m,0))}),{immediate:!0}),g=l=>{a.value=(0,n.Xl)(l.maps),s.value=(0,n.Xl)(new l.maps.Map(r.value,p())),l=f(a.value),a.value[c]=l,k.forEach((e=>{var r;null===(r=s.value)||void 0===r||r.addListener(e,(r=>t(e,r)))})),o.value=!0,l=Object.keys(e).filter((e=>!"apiPromise apiKey version libraries region language center zoom".split(" ").includes(e))).map((t=>(0,n.Vh)(e,t))),(0,i.YP)([()=>e.center,()=>e.zoom,...l],(([e,t],[r,i])=>{var o,n,a;const{center:l,zoom:u,...d}=p();null===(o=s.value)||void 0===o||o.setOptions(d),void 0!==t&&t!==i&&(null===(n=s.value)||void 0===n||n.setZoom(t)),t=!r||e.lng!==r.lng||e.lat!==r.lat,e&&t&&(null===(a=s.value)||void 0===a||a.panTo(e))}))};return(0,i.bv)((()=>{if(e.apiPromise&&e.apiPromise instanceof Promise)e.apiPromise.then(g);else{try{const{apiKey:t,region:r,version:i,language:o,libraries:s}=e;y=new v({apiKey:t,region:r,version:i,language:o,libraries:s})}catch(t){console.error(t)}y.load().then(g)}})),(0,i.Jd)((()=>{var e;d.value=!1,s.value&&(null===(e=a.value)||void 0===e||e.event.clearInstanceListeners(s.value))})),{mapRef:r,ready:o,map:s,api:a,mapTilesLoaded:d}}});function C(e,t){if(void 0===t&&(t={}),t=t.insertAt,e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}C("\n.mapdiv[data-v-177d06e3] {\n  width: 100%;\n  height: 100%;\n}\n");let w=(0,i.HX)("data-v-177d06e3");(0,i.dD)("data-v-177d06e3");let x={ref:"mapRef",class:"mapdiv"};(0,i.Cn)();let M=w((e=>((0,i.wg)(),(0,i.j4)("div",null,[(0,i.Wm)("div",x,null,512),(0,i.WI)(e.$slots,"default",{ready:e.ready,map:e.map,api:e.api,mapTilesLoaded:e.mapTilesLoaded},void 0,!0)]))));b.render=M,b.__scopeId="data-v-177d06e3";let _=(e,t,r,o)=>{const s=(0,n.iH)(),a=(0,i.f3)(l,(0,n.iH)()),d=(0,i.f3)(u,(0,n.iH)()),h=(0,i.f3)(p,(0,n.iH)()),m=(0,i.Fl)((()=>!!(h.value&&d.value&&(s.value instanceof d.value.Marker||s.value instanceof d.value[c]))));return(0,i.YP)([a,r],((i,[l,u])=>{var p,g,v;i=JSON.stringify(r.value)!==JSON.stringify(u)||a.value!==l,a.value&&d.value&&i&&(s.value?(s.value.setOptions(r.value),m.value&&(null===(p=h.value)||void 0===p||p.removeMarker(s.value),null===(g=h.value)||void 0===g||g.addMarker(s.value))):(s.value="Marker"===e||e===c?(0,n.Xl)(new d.value[e](r.value)):(0,n.Xl)(new d.value[e]({...r.value,map:a.value})),m.value?null===(v=h.value)||void 0===v||v.addMarker(s.value):s.value.setMap(a.value),t.forEach((e=>{var t;null===(t=s.value)||void 0===t||t.addListener(e,(t=>o(e,t)))}))))}),{immediate:!0}),(0,i.Jd)((()=>{var e,t;s.value&&(null===(e=d.value)||void 0===e||e.event.clearInstanceListeners(s.value),m.value?null===(t=h.value)||void 0===t||t.removeMarker(s.value):s.value.setMap(null))})),s},O="animation_changed click dblclick rightclick dragstart dragend drag mouseover mousedown mouseout mouseup draggable_changed clickable_changed contextmenu cursor_changed flat_changed rightclick zindex_changed icon_changed position_changed shape_changed title_changed visible_changed".split(" ");var P=(0,i.aZ)({name:"Marker",props:{options:{type:Object,required:!0}},emits:O,setup(e,{emit:t,expose:r,slots:o}){return e=(0,n.Vh)(e,"options"),t=_("Marker",O,e,t),(0,i.JJ)(d,t),r({marker:t}),()=>{var e;return null===(e=o.default)||void 0===e?void 0:e.call(o)}}});(0,i.aZ)({name:"Polyline",props:{options:{type:Object,required:!0}},emits:m,setup(e,{emit:t}){return e=(0,n.Vh)(e,"options"),{polyline:_("Polyline",m,e,t)}},render:()=>null}),(0,i.aZ)({name:"Polygon",props:{options:{type:Object,required:!0}},emits:m,setup(e,{emit:t}){return e=(0,n.Vh)(e,"options"),{polygon:_("Polygon",m,e,t)}},render:()=>null});let S=m.concat(["bounds_changed"]);(0,i.aZ)({name:"Rectangle",props:{options:{type:Object,required:!0}},emits:S,setup(e,{emit:t}){return e=(0,n.Vh)(e,"options"),{rectangle:_("Rectangle",S,e,t)}},render:()=>null});let I=m.concat(["center_changed","radius_changed"]);(0,i.aZ)({name:"Circle",props:{options:{type:Object,required:!0}},emits:I,setup(e,{emit:t}){return e=(0,n.Vh)(e,"options"),{circle:_("Circle",I,e,t)}},render:()=>null});var E=(0,i.aZ)({props:{position:{type:String,required:!0},index:{type:Number,default:1}},emits:["content:loaded"],setup(e,{emit:t}){let r=(0,n.iH)(null),o=(0,i.f3)(l,(0,n.iH)()),s=(0,i.f3)(u,(0,n.iH)()),a=(0,i.f3)(h,(0,n.iH)(!1)),d=(0,n.iH)(!1),p=(0,i.YP)([a,s,r],(([r,i,o])=>{i&&r&&o&&(c(e.position),d.value=!0,t("content:loaded"),setTimeout(p,0))}),{immediate:!0}),c=e=>{o.value&&s.value&&r.value&&o.value.controls[s.value.ControlPosition[e]].push(r.value)},m=e=>{if(o.value&&s.value){let t=null;e=s.value.ControlPosition[e],o.value.controls[e].forEach(((e,i)=>{e===r.value&&(t=i)})),null!==t&&o.value.controls[e].removeAt(t)}};return(0,i.Jd)((()=>m(e.position))),(0,i.YP)((()=>e.position),((e,t)=>{m(t),c(e)})),(0,i.YP)((()=>e.index),(t=>{t&&r.value&&(r.value.index=e.index)})),{controlRef:r,showContent:d}}});let L={ref:"controlRef"};E.render=function(e){return(0,i.wg)(),(0,i.j4)(i.HY,null,[(0,i.kq)("\n    v-show must be used instead of v-if otherwise there\n    would be no rendered content pushed to the map controls\n  "),(0,i.wy)((0,i.Wm)("div",L,[(0,i.WI)(e.$slots,"default")],512),[[a.F8,e.showContent]])],2112)};let j="closeclick content_changed domready position_changed visible zindex_changed".split(" ");var q=(0,i.aZ)({props:{options:{type:Object,default:()=>({})}},emits:j,setup(e,{slots:t,emit:r}){let o,s=(0,n.iH)(),a=(0,n.iH)(),p=(0,i.f3)(l,(0,n.iH)()),c=(0,i.f3)(u,(0,n.iH)()),h=(0,i.f3)(d,(0,n.iH)()),m=(0,i.Fl)((()=>{var e;return null===(e=t.default)||void 0===e?void 0:e.call(t).some((e=>e.type!==i.sv))}));return(0,i.bv)((()=>{(0,i.YP)([p,()=>e.options],(([,e],[t,i])=>{t=JSON.stringify(e)!==JSON.stringify(i)||p.value!==t,p.value&&c.value&&t&&(s.value?(s.value.setOptions({...e,content:m.value?a.value:e.content}),h.value||s.value.open({map:p.value})):(s.value=s.value=(0,n.Xl)(new c.value.InfoWindow({...e,content:m.value?a.value:e.content})),h.value?o=h.value.addListener("click",(()=>{s.value&&s.value.open({map:p.value,anchor:h.value})})):s.value.open({map:p.value}),j.forEach((e=>{var t;null===(t=s.value)||void 0===t||t.addListener(e,(t=>r(e,t)))}))))}),{immediate:!0})})),(0,i.Jd)((()=>{var e;o&&o.remove(),s.value&&(null===(e=c.value)||void 0===e||e.event.clearInstanceListeners(s.value),s.value.close())})),{infoWindow:s,infoWindowRef:a,hasSlotContent:m}}});C("\n.info-window-content[data-v-5b373d6e] {\n  display: none;\n}\n.mapdiv .info-window-content[data-v-5b373d6e] {\n  display: inline-block;\n}\n");let Z=(0,i.HX)("data-v-5b373d6e");(0,i.dD)("data-v-5b373d6e");let T={key:0,ref:"infoWindowRef",class:"info-window-content"};(0,i.Cn)();let z=Z((e=>e.hasSlotContent?((0,i.wg)(),(0,i.j4)("div",T,[(0,i.WI)(e.$slots,"default",{},void 0,!0)],512)):(0,i.kq)("v-if",!0)));function N(e,t,r,i,o,s){if(!(o-i<=r)){var n=i+o>>1;H(e,t,n,i,o,s%2),N(e,t,r,i,n-1,s+1),N(e,t,r,n+1,o,s+1)}}function H(e,t,r,i,o,s){for(;o>i;){if(600<o-i){var n=o-i+1,a=r-i+1,l=Math.log(n),u=.5*Math.exp(2*l/3);l=.5*Math.sqrt(l*u*(n-u)/n)*(0>a-n/2?-1:1),H(e,t,r,Math.max(i,Math.floor(r-a*u/n+l)),Math.min(o,Math.floor(r+(n-a)*u/n+l)),s)}for(n=t[2*r+s],a=i,u=o,R(e,t,i,r),t[2*o+s]>n&&R(e,t,i,o);a<u;){for(R(e,t,a,u),a++,u--;t[2*a+s]<n;)a++;for(;t[2*u+s]>n;)u--}t[2*i+s]===n?R(e,t,i,u):(u++,R(e,t,u,o)),u<=r&&(i=u+1),r<=u&&(o=u-1)}}function R(e,t,r,i){B(e,r,i),B(t,2*r,2*i),B(t,2*r+1,2*i+1)}function B(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}q.render=z,q.__scopeId="data-v-5b373d6e";let A=e=>e[0],$=e=>e[1];class F{constructor(e,t=A,r=$,i=64,o=Float64Array){this.nodeSize=i,this.points=e;let s=this.ids=new(65536>e.length?Uint16Array:Uint32Array)(e.length);o=this.coords=new o(2*e.length);for(let n=0;n<e.length;n++)s[n]=n,o[2*n]=t(e[n]),o[2*n+1]=r(e[n]);N(s,o,i,0,s.length-1,0)}range(e,t,r,i){{var o=this.ids,s=this.coords,n=this.nodeSize;let l,u,d=[0,o.length-1,0],p=[];for(;d.length;){var a=d.pop();let c=d.pop(),h=d.pop();if(c-h<=n){for(a=h;a<=c;a++)l=s[2*a],u=s[2*a+1],l>=e&&l<=r&&u>=t&&u<=i&&p.push(o[a]);continue}let m=Math.floor((h+c)/2);l=s[2*m],u=s[2*m+1],l>=e&&l<=r&&u>=t&&u<=i&&p.push(o[m]);let g=(a+1)%2;(0===a?e<=l:t<=u)&&(d.push(h),d.push(m-1),d.push(g)),(0===a?r>=l:i>=u)&&(d.push(m+1),d.push(c),d.push(g))}e=p}return e}within(e,t,r){{var i=this.ids,o=this.coords,s=this.nodeSize;let d=[0,i.length-1,0],p=[],c=r*r;for(;d.length;){var n=d.pop();let h=d.pop();var a=d.pop();if(h-a<=s){for(n=a;n<=h;n++){a=o[2*n]-e;var l=o[2*n+1]-t;a=a*a+l*l,a<=c&&p.push(i[n])}continue}l=Math.floor((a+h)/2);let m=o[2*l],g=o[2*l+1];{var u=m-e;let r=g-t;u=u*u+r*r}u<=c&&p.push(i[l]),u=(n+1)%2,(0===n?e-r<=m:t-r<=g)&&(d.push(a),d.push(l-1),d.push(u)),(0===n?e+r>=m:t+r>=g)&&(d.push(l+1),d.push(h),d.push(u))}e=p}return e}}let J={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},D=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1));class G{constructor(e){this.options=Y(Object.create(J),e),this.trees=Array(this.options.maxZoom+1)}load(e){let{log:t,minZoom:r,maxZoom:i,nodeSize:o}=this.options;t&&console.time("total time");var s=`prepare ${e.length} points`;t&&console.time(s),this.points=e;let n=[];for(let a=0;a<e.length;a++)e[a].geometry&&n.push(V(e[a],a));for(this.trees[i+1]=new F(n,Q,ee,o,Float32Array),t&&console.timeEnd(s),e=i;e>=r;e--)s=+Date.now(),n=this._cluster(n,e),this.trees[e]=new F(n,Q,ee,o,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,n.length,+Date.now()-s);return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;var i=Math.max(-90,Math.min(90,e[1])),o=180===e[2]?180:((e[2]+180)%360+360)%360-180;let s=Math.max(-90,Math.min(90,e[3]));if(360<=e[2]-e[0])r=-180,o=180;else if(r>o){var n=this.getClusters([r,i,180,s],t);return i=this.getClusters([-180,i,o,s],t),n.concat(i)}for(n of(t=this.trees[this._limitZoom(t)],o=t.range(r/360+.5,X(s),o/360+.5,X(i)),i=[],o))o=t.points[n],i.push(o.numPoints?U(o):this.points[o.index]);return i}getChildren(e){var t=this._getOriginId(e),r=this._getOriginZoom(e);let i=this.trees[r];if(!i)throw Error("No cluster with the specified id.");if(t=i.points[t],!t)throw Error("No cluster with the specified id.");t=i.within(t.x,t.y,this.options.radius/(this.options.extent*Math.pow(2,r-1))),r=[];for(let o of t)t=i.points[o],t.parentId===e&&r.push(t.numPoints?U(t):this.points[t.index]);if(0===r.length)throw Error("No cluster with the specified id.");return r}getLeaves(e,t,r){let i=[];return this._appendLeaves(i,e,t||10,r||0,0),i}getTile(e,t,r){let i=this.trees[this._limitZoom(e)];e=Math.pow(2,e);let{extent:o,radius:s}=this.options,n=s/o,a=(r-n)/e,l=(r+1+n)/e,u={features:[]};return this._addTileFeatures(i.range((t-n)/e,a,(t+1+n)/e,l),i.points,t,r,e,u),0===t&&this._addTileFeatures(i.range(1-n/e,a,1,l),i.points,e,r,e,u),t===e-1&&this._addTileFeatures(i.range(0,a,n/e,l),i.points,-1,r,e,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){if(e=this.getChildren(e),t++,1!==e.length)break;e=e[0].properties.cluster_id}return t}_appendLeaves(e,t,r,i,o){t=this.getChildren(t);for(let s of t)if((t=s.properties)&&t.cluster?o=o+t.point_count<=i?o+t.point_count:this._appendLeaves(e,t.cluster_id,r,i,o):o<i?o++:e.push(s),e.length===r)break;return o}_addTileFeatures(e,t,r,i,o,s){for(let l of e){e=t[l];let u=e.numPoints;var n=void 0;let d;var a=void 0;let p;u?(n=W(e),d=e.x,a=e.y):(a=this.points[e.index],n=a.properties,d=a.geometry.coordinates[0]/360+.5,a=X(a.geometry.coordinates[1])),n={type:1,geometry:[[Math.round(this.options.extent*(d*o-r)),Math.round(this.options.extent*(a*o-i))]],tags:n},u?p=e.id:this.options.generateId?p=e.index:this.points[e.index].id&&(p=this.points[e.index].id),void 0!==p&&(n.id=p),s.features.push(n)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){let r=[],{radius:i,extent:o,reduce:s,minPoints:n}=this.options,a=i/(o*Math.pow(2,t));for(let c=0;c<e.length;c++){var l=e[c];if(l.zoom<=t)continue;l.zoom=t;let i=this.trees[t+1];var u=i.within(l.x,l.y,a),d=l.numPoints||1;let o=d;for(let e of u){var p=i.points[e];p.zoom>t&&(o+=p.numPoints||1)}if(o>d&&o>=n){p=l.x*d;let e=l.y*d;d=s&&1<d?this._map(l,!0):null;let n=(c<<5)+(t+1)+this.points.length;for(let r of u){if(u=i.points[r],u.zoom<=t)continue;u.zoom=t;let o=u.numPoints||1;p+=u.x*o,e+=u.y*o,u.parentId=n,s&&(d||(d=this._map(l,!0)),s(d,this._map(u)))}l.parentId=n,r.push(K(p/o,e/o,n,o,d))}else if(r.push(l),1<o)for(let e of u)l=i.points[e],l.zoom<=t||(l.zoom=t,r.push(l))}return r}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?Y({},e.properties):e.properties;e=this.points[e.index].properties;let r=this.options.map(e);return t&&r===e?Y({},r):r}}function K(e,t,r,i,o){return{x:D(e),y:D(t),zoom:1/0,id:r,parentId:-1,numPoints:i,properties:o}}function V(e,t){let[r,i]=e.geometry.coordinates;return{x:D(r/360+.5),y:D(X(i)),zoom:1/0,index:t,parentId:-1}}function U(e){var t=e.id,r=W(e);return{type:"Feature",id:t,properties:r,geometry:{type:"Point",coordinates:[360*(e.x-.5),360*Math.atan(Math.exp((180-360*e.y)*Math.PI/180))/Math.PI-90]}}}function W(e){let t=e.numPoints,r=1e4<=t?`${Math.round(t/1e3)}k`:1e3<=t?Math.round(t/100)/10+"k":t;return Y(Y({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function X(e){return e=Math.sin(e*Math.PI/180),e=.5-.25*Math.log((1+e)/(1-e))/Math.PI,0>e?0:1<e?1:e}function Y(e,t){for(let r in t)e[r]=t[r];return e}function Q(e){return e.x}function ee(e){return e.y}var te=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i;if(Array.isArray(t)){var o=t.length;if(o!=r.length)return!1;for(i=o;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();var s=Object.keys(t);if(o=s.length,o!==Object.keys(r).length)return!1;for(i=o;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=o;0!==i--;)if(o=s[i],!e(t[o],r[o]))return!1;return!0}return t!==t&&r!==r};class re{constructor({markers:e,position:t}){this.markers=e,t&&(this._position=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t))}get bounds(){if(0!==this.markers.length||this._position)return this.markers.reduce(((e,t)=>e.extend(t.getPosition())),new google.maps.LatLngBounds(this._position,this._position))}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>e.getVisible())).length}push(e){this.markers.push(e)}delete(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}class ie{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return oe(e)}}let oe=e=>e.map((e=>new re({position:e.getPosition(),markers:[e]})));class se extends ie{constructor(e){var t,{maxZoom:r,radius:i=60}=e,o=["maxZoom","radius"],s={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>o.indexOf(t)&&(s[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)0>o.indexOf(t[n])&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]])}super({maxZoom:r}),this.superCluster=new G(Object.assign({maxZoom:this.maxZoom,radius:i},s)),this.state={zoom:null}}calculate(e){let t=!1;if(!te(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var r=this.markers.map((e=>({type:"Feature",geometry:{type:"Point",coordinates:[e.getPosition().lng(),e.getPosition().lat()]},properties:{marker:e}})));this.superCluster.load(r)}return r={zoom:e.map.getZoom()},t||this.state.zoom>this.maxZoom&&r.zoom>this.maxZoom||(t=t||!te(this.state,r)),this.state=r,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(this.transformCluster.bind(this))}transformCluster({geometry:{coordinates:[e,t]},properties:r}){return r.cluster?new re({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((e=>e.properties.marker)),position:new google.maps.LatLng({lat:t,lng:e})}):(e=r.marker,new re({markers:[e],position:e.getPosition()}))}}class ne{constructor(e,t){this.markers={sum:e.length},e=t.map((e=>e.count));let r=e.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...e),max:Math.max(...e)}}}}class ae{render({count:e,position:t},r){return r=window.btoa(`\n  <svg fill="${e>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>`),new google.maps.Marker({position:t,icon:{url:`data:image/svg+xml;base64,${r}`,scaledSize:new google.maps.Size(45,45)},label:{text:String(e),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:`Cluster of ${e} markers`,zIndex:Number(google.maps.Marker.MAX_ZINDEX)+e})}}class le{constructor(){var e=le,t=google.maps.OverlayView;for(let r in t.prototype)e.prototype[r]=t.prototype[r]}}var ue,de=ue||(ue={});de.CLUSTERING_BEGIN="clusteringbegin",de.CLUSTERING_END="clusteringend",de.CLUSTER_CLICK="click";let pe=(e,t,r)=>{r.fitBounds(t.bounds)};class ce extends le{constructor({map:e,markers:t=[],algorithm:r=new se({}),renderer:i=new ae,onClusterClick:o=pe}){super(),this.markers=[...t],this.clusters=[],this.algorithm=r,this.renderer=i,this.onClusterClick=o,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){let r=this.markers.indexOf(e);return-1!==r&&(e.setMap(null),this.markers.splice(r,1),t||this.render(),!0)}removeMarkers(e,t){let r=!1;return e.forEach((e=>{r=this.removeMarker(e,!0)||r})),r&&!t&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){let e=this.getMap();if(e instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,ue.CLUSTERING_BEGIN,this);let{clusters:t,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});(r||void 0==r)&&(this.reset(),this.clusters=t,this.renderClusters()),google.maps.event.trigger(this,ue.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>e.setMap(null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){let e=new ne(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((r=>{1===r.markers.length?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e),this.onClusterClick&&r.marker.addListener("click",(e=>{google.maps.event.trigger(this,ue.CLUSTER_CLICK,r),this.onClusterClick(e,r,t)}))),r.marker.setMap(t)}))}}let he=Object.values(ue);(0,i.aZ)({name:"MarkerCluster",props:{options:{type:Object,default:()=>({})}},emits:he,setup(e,{emit:t,expose:r,slots:o}){let s=(0,n.iH)(),a=(0,i.f3)(l,(0,n.iH)()),d=(0,i.f3)(u,(0,n.iH)());return(0,i.JJ)(p,s),(0,i.YP)(a,(()=>{a.value&&(s.value=(0,n.Xl)(new ce({map:a.value,...e.options})),he.forEach((e=>{var r;null===(r=s.value)||void 0===r||r.addListener(e,(r=>t(e,r)))})))}),{immediate:!0}),(0,i.Jd)((()=>{var e;s.value&&(null===(e=d.value)||void 0===e||e.event.clearInstanceListeners(s.value),s.value.clearMarkers(),s.value.setMap(null))})),r({markerCluster:s}),()=>{var e;return null===(e=o.default)||void 0===e?void 0:e.call(o)}}});var me=(0,i.aZ)({props:{options:{type:Object,required:!0}},setup(e,{slots:t,emit:r}){let o=(0,n.iH)(),s=(0,n.iH)(),a=(0,i.Fl)((()=>{var e;return null===(e=t.default)||void 0===e?void 0:e.call(t).some((e=>e.type!==i.sv))})),l=(0,i.Fl)((()=>({...e.options,element:o.value})));return(0,i.bv)((()=>{s=_(c,[],l,r)})),{customMarkerRef:o,customMarker:s,hasSlotContent:a}}});C("\n.custom-marker-content[data-v-b9d5ec8a] {\n  display: none;\n}\n.mapdiv .custom-marker-content[data-v-b9d5ec8a] {\n  display: inline-block;\n}\n");let ge=(0,i.HX)("data-v-b9d5ec8a")((e=>e.hasSlotContent?((0,i.wg)(),(0,i.j4)("div",{key:0,ref:"customMarkerRef",class:"custom-marker-content",style:{cursor:e.$attrs.onClick?"pointer":void 0}},[(0,i.WI)(e.$slots,"default",{},void 0,!0)],4)):(0,i.kq)("v-if",!0)));me.render=ge,me.__scopeId="data-v-b9d5ec8a";var ve=(0,i.aZ)({name:"MapDeliveries",components:{GoogleMap:b,Marker:P},data(){return{api:"AIzaSyAwJd9L1aFxZb6gyInuN39ByiGvx6qkiWM",center:{lat:37.36250205559738,lng:-6.034784330451754},deliveries:[],markers:[]}},mounted(){this.geolocate(),this.getDeliveries()},methods:{getDeliveries(){s.Z.getReadytDeliveries().then((e=>{this.deliveries=e.data,this.deliveries.forEach((e=>{this.geocode(e.address)}))}))},geolocate(){navigator.geolocation.getCurrentPosition((e=>{this.center={lat:e.coords.latitude,lng:e.coords.longitude}}))},geocode(e){s.Z.geocodeAddress(e).then((e=>{console.log(e);const t=e.data.results;if(t.length>0){const e=t[0].geometry.location;this.markers.push(e)}})).catch((e=>{console.log("Error geocoding address: ",e.message)}))}}}),fe=r(89);const ye=(0,fe.Z)(ve,[["render",o]]);var ke=ye}}]);
//# sourceMappingURL=map-deliveries.01ad9d67.js.map